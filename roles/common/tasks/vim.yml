---
- name: vim | create directories
  file:
    path: "{{ item }}"
    state: directory
  loop:
  - ~/.config/vim               # for vimrc
  - ~/.config/vim/autoload      # for plugin manager
  - ~/.local/share/vim          # for viminfo
  - ~/.local/share/vim/plugged  # for installing uplugins


- name: vim | deploy configuration
  file:
    src: "{{ role_path }}/files/{{ item.src }}"
    dest: "{{ item.dest }}"
    state: link
    force: yes
  loop:
  - { src: vimrc,    dest: ~/.config/vim/vimrc }
  - { src: plug.vim, dest: ~/.config/vim/autoload/plug.vim }


- name: vim | install plugins
  shell: vim -es -u ~/.config/vim/vimrc +PlugInstall +qall

